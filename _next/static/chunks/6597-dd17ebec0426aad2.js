"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6597],{40520:function(e,t,n){n.d(t,{K:function(){return i}});function i(e){return e}},46597:function(e,t,n){n.d(t,{L:function(){return w}});var i=n(65586),r=n(94123),o=n(50340),a=n(29934),s=n(30951),c=n(43806),h=n(96678),d=n(40520);let l=/(rabby|trustwallet)/,u={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider:e=>e?.coinbaseWalletExtension?e.coinbaseWalletExtension:m(e,"isCoinbaseWallet")},metaMask:{id:"metaMask",name:"MetaMask",provider:e=>m(e,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;for(let t of["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPortal","isRabby","isTokenPocket","isTokenary","isZerion"])if(e[t])return!1;return!0})},phantom:{id:"phantom",name:"Phantom",provider:e=>e?.phantom?.ethereum?e.phantom?.ethereum:m(e,"isPhantom")}};function w(e={}){let t,n,f,g;let{shimDisconnect:p=!0,unstable_shimAsyncInject:v}=e;function C(){let t=e.target;if("function"==typeof t){let e=t();if(e)return e}return"object"==typeof t?t:"string"==typeof t?{...u[t]??{id:t,name:`${t[0].toUpperCase()}${t.slice(1)}`,provider:`is${t[0].toUpperCase()}${t.slice(1)}`}}:{id:"injected",name:"Injected",provider:e=>e?.ethereum}}return(0,d.K)(d=>({get icon(){return C().icon},get id(){return C().id},get name(){return C().name},get supportsSimulation(){return l.test(this.id.toLowerCase())},type:w.type,async setup(){let n=await this.getProvider();n&&e.target&&(f||(f=this.onConnect.bind(this),n.on("connect",f)),t||(t=this.onAccountsChanged.bind(this),n.on("accountsChanged",t)))},async connect({chainId:o,isReconnecting:a}={}){let s=await this.getProvider();if(!s)throw new h.M;let c=[];if(a)c=await this.getAccounts().catch(()=>[]);else if(p)try{let e=await s.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]});(c=e[0]?.caveats?.[0]?.value?.map(e=>i.K(e))).length>0&&(c=await this.getAccounts())}catch(e){if(e.code===r.ab.code)throw new r.ab(e);if(e.code===r.pT.code)throw e}try{c?.length||a||(c=(await s.request({method:"eth_requestAccounts"})).map(e=>(0,i.K)(e))),f&&(s.removeListener("connect",f),f=void 0),t||(t=this.onAccountsChanged.bind(this),s.on("accountsChanged",t)),n||(n=this.onChainChanged.bind(this),s.on("chainChanged",n)),g||(g=this.onDisconnect.bind(this),s.on("disconnect",g));let h=await this.getChainId();if(o&&h!==o){let e=await this.switchChain({chainId:o}).catch(e=>{if(e.code===r.ab.code)throw e;return{id:h}});h=e?.id??h}return p&&await d.storage?.removeItem(`${this.id}.disconnected`),e.target||await d.storage?.setItem("injected.connected",!0),{accounts:c,chainId:h}}catch(e){if(e.code===r.ab.code)throw new r.ab(e);if(e.code===r.pT.code)throw new r.pT(e);throw e}},async disconnect(){let t=await this.getProvider();if(!t)throw new h.M;n&&(t.removeListener("chainChanged",n),n=void 0),g&&(t.removeListener("disconnect",g),g=void 0),f||(f=this.onConnect.bind(this),t.on("connect",f));try{await (0,o.F)(()=>t.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}p&&await d.storage?.setItem(`${this.id}.disconnected`,!0),e.target||await d.storage?.removeItem("injected.connected")},async getAccounts(){let e=await this.getProvider();if(!e)throw new h.M;return(await e.request({method:"eth_accounts"})).map(e=>(0,i.K)(e))},async getChainId(){let e=await this.getProvider();if(!e)throw new h.M;return Number(await e.request({method:"eth_chainId"}))},async getProvider(){let e;if("undefined"==typeof window)return;let t=C();return(e="function"==typeof t.provider?t.provider(window):"string"==typeof t.provider?m(window,t.provider):t.provider)&&!e.removeListener&&("off"in e&&"function"==typeof e.off?e.removeListener=e.off:e.removeListener=()=>{}),e},async isAuthorized(){try{if(p&&await d.storage?.getItem(`${this.id}.disconnected`)||!e.target&&!await d.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(void 0!==v&&!1!==v){let e=async()=>("undefined"!=typeof window&&window.removeEventListener("ethereum#initialized",e),!!await this.getProvider()),t="number"==typeof v?v:1e3;if(await Promise.race([..."undefined"!=typeof window?[new Promise(t=>window.addEventListener("ethereum#initialized",()=>t(e()),{once:!0}))]:[],new Promise(n=>setTimeout(()=>n(e()),t))]))return!0}throw new h.M}return!!(await (0,a.J)(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:e,chainId:t}){let n=await this.getProvider();if(!n)throw new h.M;let i=d.chains.find(e=>e.id===t);if(!i)throw new r.x3(new c.X4);try{return await Promise.all([n.request({method:"wallet_switchEthereumChain",params:[{chainId:(0,s.eC)(t)}]}).then(async()=>{await this.getChainId()===t&&d.emitter.emit("change",{chainId:t})}),new Promise(e=>d.emitter.once("change",({chainId:n})=>{n===t&&e()}))]),i}catch(o){if(4902===o.code||o?.data?.originalError?.code===4902)try{let o,a;let{default:c,...h}=i.blockExplorers??{};e?.blockExplorerUrls?o=e.blockExplorerUrls:c&&(o=[c.url,...Object.values(h).map(e=>e.url)]),a=e?.rpcUrls?.length?e.rpcUrls:[i.rpcUrls.default?.http[0]??""];let d={blockExplorerUrls:o,chainId:(0,s.eC)(t),chainName:e?.chainName??i.name,iconUrls:e?.iconUrls,nativeCurrency:e?.nativeCurrency??i.nativeCurrency,rpcUrls:a};if(await n.request({method:"wallet_addEthereumChain",params:[d]}),await this.getChainId()!==t)throw new r.ab(Error("User rejected switch after adding network."));return i}catch(e){throw new r.ab(e)}if(o.code===r.ab.code)throw new r.ab(o);throw new r.x3(o)}},async onAccountsChanged(e){if(0===e.length)this.onDisconnect();else if(d.emitter.listenerCount("connect")){let e=(await this.getChainId()).toString();this.onConnect({chainId:e}),p&&await d.storage?.removeItem(`${this.id}.disconnected`)}else d.emitter.emit("change",{accounts:e.map(e=>(0,i.K)(e))})},onChainChanged(e){let t=Number(e);d.emitter.emit("change",{chainId:t})},async onConnect(e){let i=await this.getAccounts();if(0===i.length)return;let r=Number(e.chainId);d.emitter.emit("connect",{accounts:i,chainId:r});let o=await this.getProvider();o&&(f&&(o.removeListener("connect",f),f=void 0),t||(t=this.onAccountsChanged.bind(this),o.on("accountsChanged",t)),n||(n=this.onChainChanged.bind(this),o.on("chainChanged",n)),g||(g=this.onDisconnect.bind(this),o.on("disconnect",g)))},async onDisconnect(e){let t=await this.getProvider();e&&1013===e.code&&t&&(await this.getAccounts()).length||(d.emitter.emit("disconnect"),t&&(n&&(t.removeListener("chainChanged",n),n=void 0),g&&(t.removeListener("disconnect",g),g=void 0),f||(f=this.onConnect.bind(this),t.on("connect",f))))}}))}function m(e,t){function n(e){return"function"==typeof t?t(e):"string"!=typeof t||e[t]}let i=e.ethereum;return i?.providers?i.providers.find(e=>n(e)):i&&n(i)?i:void 0}w.type="injected"},50340:function(e,t,n){n.d(t,{F:function(){return i}});function i(e,{errorInstance:t=Error("timed out"),timeout:n,signal:i}){return new Promise((r,o)=>{(async()=>{let a;try{let s=new AbortController;n>0&&(a=setTimeout(()=>{i?s.abort():o(t)},n)),r(await e({signal:s?.signal||null}))}catch(e){e?.name==="AbortError"&&o(t),o(e)}finally{clearTimeout(a)}})()})}}}]);